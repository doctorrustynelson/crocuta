{"name":"Crocuta","tagline":"Node Map Reduce and Distributed Computing","body":"[![Build Status](https://img.shields.io/travis/doctorrustynelson/crocuta.svg)](http://travis-ci.org/doctorrustynelson/crocuta)\r\n[![Coverage Status](http://img.shields.io/coveralls/doctorrustynelson/crocuta.svg)](https://coveralls.io/r/doctorrustynelson/crocuta)\r\n[![NPM Version](https://img.shields.io/npm/v/crocuta.svg)](https://npmjs.org/package/crocuta)\r\n![NPM License](https://img.shields.io/npm/l/crocuta.svg)\r\n\r\n## Overview\r\n  Crocuta is at its core a distributed computing system written atop the nodejs ecosystem.  This constantly evolving ecosystem of modules allows for an ever growing variety of possibilities.  The choice of this ecosystem was fueled by a desire to solve some of the frustrations that some of the major players in this field are plagued by.  Here are just some of the frustrations that this system attempt to rectify:\r\n  \r\n#### Just Do Something Damn It!\r\n  It really ruins the mood when a bunch of friends decide to get together to do something and are stuck waiting for that one guy who is running really late.  This happens in computers when one aspect of a process/system/algorithm needs to wait for another process/system/algorithm to finish.  There are much better things to do then just fly around and around in a holding pattern.  One of the key aspects of nodejs is its asynchronous execution which when used properly can eliminate blocking and wasted time.  Crocuta adopted this principle and utilizes it as one of the corner stones of the system.\r\n  \r\n#### What Do You Mean The Wrong Version?  You've Been Running For Half an Hour!\r\n  Dependency management in many systems is neglected because their developers don't have to deal with it when their working with the system.  They always have the right version; it's the one they are working on.  In many systems this results in very weird phenomena such as the systems crashing after running for a significant amount of time without even a hint of something wrong before crashing because a \"Class\" was missing. Nodejs is very fortunate to have npm which not only makes getting new libraries and tools easy but also beyond simple to manage.  Crocuta's vision explicitly aims to emulate this ease of use with dependency management.\r\n\r\n#### One Second Let Me Check The System Specs.\r\n  The back bone of any distributed computing system is its compute power.  For some that means specialized hardware and huge monitoring systems to keep the back end cluster running.  Taking a page out of Hadoop's book Crocuta is designed to run on as many systems (independent of complexity) as possible.  Since Crocuta is backed by nodejs and written in JavaScript it can run where ever a traditional browser can run with plans for Crocuta to close the gap between user and system by actually allowing aspects of itself to run in a traditional browser. \r\n\r\n## Getting Started\r\n  Before attempting to install Crocuta itself confirm that you have nodejs and npm installed.  If not then you can get them from [nodejs.org](http://nodejs.org/).\r\n\r\n### Install the Crocuta CLI\r\n\r\n    npm install -g crocuta\r\n\r\n### Install the Crocuta client\r\n\r\n    npm install crocuta \r\n\r\n### A Simple Map-Reduce Script\r\n\r\n    #!/usr/bin/env node\r\n    \r\n    var fs = require( 'fs' );\r\n    var path = require( 'path' );\r\n    var crocuta = require( 'crocuta' )( );\r\n    \r\n    var job = crocuta.createJob( 'word-count' )\r\n        .joule( function( ){\r\n            fileSystem.getKeysUnder( input, function( keys ){\r\n                done( keys.map( function( key ){\r\n                    return input + '.' + key;\r\n                } ) );\r\n            } );\r\n        }, 'directory contents' )\r\n            .joule( function( ){\r\n                var mapping = {};\r\n                var count = input.length;\r\n\t\t\t\r\n                function callback( key, locations ){\r\n                    mapping[ key ] = locations;\r\n                    if( --count <= 0 ){\r\n                        done( mapping );\r\n                    }\r\n                }\r\n\r\n                input.forEach( function( key ){\r\n                    fileSystem.getLocationsOf( key, function( locations ){\r\n                    callback( key, locations );\r\n                } );\r\n            } );\r\n        }, 'file mapper' )\r\n        .o2mjoule( 'key2loc' ) // Proprietary Joule.\r\n        .joule( function( ){\r\n            done( fileSystem.readSync( input ).toString().split( ' ' ) );\r\n        }, 'content splitter' )\r\n        .m2ojoule( function( ){\r\n            var result = { };\r\n            var keys = Object.keys( input );\r\n            keys.forEach( function( key ){\r\n                input[ key ].forEach( function( input ){\r\n                    result[ input ] = ( result[ input ] === undefined ? 1 : result[ input ] + 1 );\r\n                } );\r\n            } );\r\n            done( result );\r\n        }, 'word counter' );\r\n\r\n    function run( ){\r\n        job.send( function( err, compiled_job ){\r\n            compiled_job.start( 'inputdir', function( err, result ){\r\n                 console.log( result );\r\n                 crocuta.stop( );\r\n            } );\r\n        } );\r\n    }\r\n    \r\n    fs.readdir( '/input', function( err, files ){\r\n        var num_files_left = files.length;\r\n        crocuta.onReady( function( ){\r\n            files.forEach( function( file ){\r\n                fs.readFile( path.resolve( '/input', file ), function( err, contents ){\r\n                    crocuta.upload( 'inputdir.' + file, contents, function( err ){\r\n                        if( --num_files_left == 0 )\r\n                            run( );\r\n                    } );\r\n                } );\r\n            } );    \r\n        } );\r\n    } );\r\n    \r\n### Running Map-Reduce Script Locally\r\nCrocuta currently is lacking in some of its management tooling so this step may seem extreme (and it is).  This issue is being worked on.\r\n\r\nOpen four terminals (or command lines) and in each run one of the following commands:\r\n  * `crocuta start shenzi`\r\n  * `crocuta start banzai`\r\n  * `crocuta start ed`\r\n  * `node script.js`\r\n\r\n## Note\r\n  Crocuta is still in its infancy and is in a constant state of flux as it progresses through it's initial development stages.  It may be best to consider it as currently at a pre-alpha or tech-demo stage.  Use at your own discretion.\r\n\r\n## Resources\r\n  * [Crocuta on NPM](https://www.npmjs.com/package/crocuta)\r\n  * [GitHub](https://github.com/doctorrustynelson/crocuta)\r\n  * [Wiki](https://github.com/doctorrustynelson/crocuta/wiki)\r\n  * [Issues](https://github.com/doctorrustynelson/crocuta/issues)","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}